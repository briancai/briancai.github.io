<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Brian的个人站，专注数学、编程以及新的技术">
<meta name="keywords" content="编程 数学 开源 Open Source">
<meta property="og:type" content="website">
<meta property="og:title" content="Brian的博客">
<meta property="og:url" content="http://briancai.github.io/index.html">
<meta property="og:site_name" content="Brian的博客">
<meta property="og:description" content="Brian的个人站，专注数学、编程以及新的技术">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brian的博客">
<meta name="twitter:description" content="Brian的个人站，专注数学、编程以及新的技术">






  <link rel="canonical" href="http://briancai.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Brian的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Brian的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">千江有水千江月，万里无云万里天</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://briancai.github.io/2019/06/02/linearess02/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brian Cai">
      <meta itemprop="description" content="Brian的个人站，专注数学、编程以及新的技术">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/02/linearess02/" class="post-title-link" itemprop="url">线性代数的本质 2 基、线性组合、线性空间</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-06-02 18:41:28 / Modified: 19:46:35" itemprop="dateCreated datePublished" datetime="2019-06-02T18:41:28+08:00">2019-06-02</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>（本文部分内容来自网络）</p>
<h1 id="基和坐标系"><a href="#基和坐标系" class="headerlink" title="基和坐标系"></a>基和坐标系</h1><p>对于向量，比如(3, -2)，我们可以用直角坐标系上的矢量来表达。</p>
<p><img src="/2019/06/02/linearess02/linear0201.jpeg" alt="向量拉伸"></p>
<p>我们可以把该向量，看成是两个沿坐标轴的向量的和。我们可以把一个坐标方格定义为一个单位，那么我们可以分别为2个坐标轴定义一个沿坐标轴方向的单位向量，j和i。</p>
<p>很明显，上面的两个沿坐标轴的向量，分别是对i和j的拉伸。而拉伸的量，恰恰是向量中，对应的标量的值。</p>
<p>我们把i和j称为“基向量”。从而任何一个向量，都是由基向量的拉伸后的组合而来。</p>
<h1 id="如果选择不同的基会怎样？"><a href="#如果选择不同的基会怎样？" class="headerlink" title="如果选择不同的基会怎样？"></a>如果选择不同的基会怎样？</h1><p>假如选一个指向右上方，一个指向右下方的向量，这两个向量同样可以表示出所有的二维向量。但是很明显，对于同一个向量，用这组基表示的结果和用i、j表示的结果在数字上肯定不同。也就是说，用数字表示一个向量时，数字的大小依赖于我们正在使用的基。</p>
<p>我们把两个向量标量乘法之和，称之为这两个向量的线性组合。</p>
<p><img src="/2019/06/02/linearess02/linear0202.jpeg" alt="线性组合"></p>
<p>可以发现，两个向量同时变化，会出现三种情况：</p>
<pre><code>1. 大部分情况，上述表达式得出的向量，能到达平面中的每一个点。
2. 当两个初始向量刚好共线时，就只能得到一条直线上的所有点。
3. 当两个向量都是零向量时，就只能乖乖地呆在原点了。
</code></pre><p>我们把由给定向量的线性组合的所有生成的向量的集合，称为由这两个给定向量张成的线性空间。</p>
<h1 id="张成的空间"><a href="#张成的空间" class="headerlink" title="张成的空间"></a>张成的空间</h1><p><img src="/2019/06/02/linearess02/linear0203.jpeg" alt="张成空间"></p>
<p>根据上图，我们可以得出：</p>
<pre><code>对于不共线的两个向量，它们的张成空间就是一个平面。
共线的向量的张成空间就是一条直线。
</code></pre><h1 id="三维张成空间"><a href="#三维张成空间" class="headerlink" title="三维张成空间"></a>三维张成空间</h1><p>在三维空间取两个指向不同方向的向量，如下图示：</p>
<p><img src="/2019/06/02/linearess02/linear0204.jpeg" alt="三维张成空间"></p>
<p>根据之前的讨论，我们知道，这两个向量的张成空间是一个过原点的平面。如下图示：</p>
<p><img src="/2019/06/02/linearess02/linear0205.jpeg" alt="三维张成空间"></p>
<p>那么如果再加上第三个向量，它们张成的空间又是什么样的呢?</p>
<p>很明显，分两种情况：</p>
<pre><code>1. 如果第三个向量恰好落在前两个向量所张成的平面上，它们的张成空间还是那个平面。换句话说，引入第三个向量到线性组合中并没有让你“走得更远”。 
</code></pre><p><img src="/2019/06/02/linearess02/linear0206.jpeg" alt="三维张成空间"></p>
<pre><code>2. 如果第三个向量没在前两个向量张成的平面里，当你缩放第三个向量的时候，它将前两个向量张成的平面沿着它的方向来回移动，从而扫过整个空间。换句话说，你完全利用了第三个向量，从而得到三维空间中所有的向量。
</code></pre><p><img src="/2019/06/02/linearess02/linear0207.jpeg" alt="三维张成空间"></p>
<h1 id="线性相关"><a href="#线性相关" class="headerlink" title="线性相关"></a>线性相关</h1><p>我们可以从另一个角度来描述“线性相关”：</p>
<pre><code>当有一组向量，可以移除其中的一个而使张成空间不变，那么这组向量是“线性相关”的。
</code></pre><p>或者可以这么说：</p>
<pre><code>一个向量可以表示为其它向量的线性组合，即落在了其它向量的张成空间内，则称这些向量是“线性相关”的。
</code></pre><p>或者：</p>
<pre><code>如果所有向量都给张成空间增加了新的维度，那么这组向量就是“线性无关”的。
</code></pre><h1 id="基的严格定义"><a href="#基的严格定义" class="headerlink" title="基的严格定义"></a>基的严格定义</h1><p>‘’’<br>向量空间的一个基是张成该空间的一个线性无关的向量集。</p>
<p><img src="/2019/06/02/linearess02/linear0208.jpeg" alt="三维张成空间"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://briancai.github.io/2019/06/02/linearess01/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brian Cai">
      <meta itemprop="description" content="Brian的个人站，专注数学、编程以及新的技术">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/02/linearess01/" class="post-title-link" itemprop="url">线性代数的本质 1 向量是什么</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-06-02 09:55:40 / Modified: 13:05:59" itemprop="dateCreated datePublished" datetime="2019-06-02T09:55:40+08:00">2019-06-02</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>(本文部分内容来自互联网)</p>
<h1 id="标量和向量"><a href="#标量和向量" class="headerlink" title="标量和向量"></a>标量和向量</h1><p>向量是线性代数中最重要的概念。我们知道标量（Scalar）是一个数，而向量（Vector）定义了一组有顺序的数。</p>
<h1 id="行向量和列向量"><a href="#行向量和列向量" class="headerlink" title="行向量和列向量"></a>行向量和列向量</h1><p>在本质上，行向量和列向量没有本质的不同。</p>
<p><img src="/2019/06/02/linearess01/linear0101.jpeg" alt="行向量列向量"></p>
<p>但是在参与运算时，列向量和行向量是有区别的。当行向量参与运算时，是作为一行参与运算的。而列向量是作为一个1列，n行参与运算。</p>
<p>因此，什么时候用行向量合适，何时用列向量何时，应根据应用场合来决定。</p>
<p>通常，我们在研究一个问题的时候，有一些不成文的用法，会：</p>
<p>列向量：表示对象，比如坐标，属性<br>行向量：表示方法，比如权重计算，方向计算。或者叫变换</p>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>我们用一个列向量来表示一个人的能力。比如：</p>
<p><img src="/2019/06/02/linearess01/caocao1.jpeg" alt="行向量列向量"></p>
<p>我们给对象曹操一个列向量，其中每一行都定义他的一个属性。统帅值，武力值，智力值和政治值。</p>
<p>我们再用一个行向量，来为刚才这个对象，指定每个值的权重，即一个评估这个对象的一个方法。</p>
<p><img src="/2019/06/02/linearess01/caocao2.jpeg" alt="行向量列向量"></p>
<p>然后，我们就可以进行计算，通过一个行向量乘以一个列向量，得到这个对象（曹操）的带兵打仗的能力。</p>
<p><img src="/2019/06/02/linearess01/caocao3.jpeg" alt="行向量列向量"></p>
<h1 id="方法-x-对象"><a href="#方法-x-对象" class="headerlink" title="方法 x 对象"></a>方法 x 对象</h1><p>通过上述举例可知，方法 x 对象 是线性代数的一个基本内容。</p>
<h1 id="向量可视化"><a href="#向量可视化" class="headerlink" title="向量可视化"></a>向量可视化</h1><p>通常我们会在直角坐标系中，表示向量。向量有方向和长度值。</p>
<p><img src="/2019/06/02/linearess01/visualize.jpeg" alt="向量可视化"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://briancai.github.io/2019/01/07/RESTfulAPIBasic/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brian Cai">
      <meta itemprop="description" content="Brian的个人站，专注数学、编程以及新的技术">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/07/RESTfulAPIBasic/" class="post-title-link" itemprop="url">RESTful接口设计基础</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-01-07 22:35:00 / Modified: 23:34:49" itemprop="dateCreated datePublished" datetime="2019-01-07T22:35:00+08:00">2019-01-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/technique/" itemprop="url" rel="index"><span itemprop="name">technique</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>(本文整理自网络)</p>
<p>API(Application Programming Interface， 应用程序编程接口)是一组规则和机制，一个应用程序或组件通过这些规则和机制与其他组件进行交互。API可以以一种方便的格式(例如JSON或XML)返回应用程序所需的数据。</p>
<p><img src="/2019/01/07/RESTfulAPIBasic/api_example.png" alt="API and Json Data"> </p>
<h1 id="什么是RESTful"><a href="#什么是RESTful" class="headerlink" title="什么是RESTful"></a>什么是RESTful</h1><p>RESTful是一种推荐的API协议格式。</p>
<p>REST是一种架构风格，RESTful是对它的描述。也就是说，如果后端服务器具有REST API，并且您(从网站/应用程序)向该API发出客户端请求，那么您的客户端就是RESTful的。</p>
<h1 id="API举例"><a href="#API举例" class="headerlink" title="API举例"></a>API举例</h1><p>比如， GitHub有自己的API，在这个API的帮助下，您可以在开发应用程序时获得关于用户、他们的存储库和其它有用的信息。您可以在项目中使用和操作这些数据。</p>
<p>我们使用下面的命令，调用它的API来获取数据：</p>
<p><img src="/2019/01/07/RESTfulAPIBasic/request_github_api.png" alt="github API"> </p>
<p>下图是上述API调用的返回结果：</p>
<p><img src="/2019/01/07/RESTfulAPIBasic/github_response.png" alt="github API response"> </p>
<h1 id="REST是如何工作的？"><a href="#REST是如何工作的？" class="headerlink" title="REST是如何工作的？"></a>REST是如何工作的？</h1><p>RESTful API的最佳实践可以归结为四个基本操作:</p>
<p>返回列表数据;<br>创建新的数据;<br>更新数据;<br>删除数据.</p>
<p>REST严重依赖HTTP。上述每种数据操作，使用对应的HTTP方法:</p>
<p>GET    - 获取数据<br>POST   - 创建数据<br>PUT    - 更新（修改）数据<br>DELETE - 删除数据</p>
<p>这些操作叫做CRUD，即我们常说的“增、查、改、删”。</p>
<p>下表描述了HTTP方法和对应的数据库操作：</p>
<p><img src="/2019/01/07/RESTfulAPIBasic/curd.png" alt="CURD"> </p>
<p>每个请求都有HTTP状态码。有很多状态返回码，但通常都分成5大类。状态码的第一位数字表示它的分类：</p>
<pre><code>1xx - 信息类;
2xx - 成功;
3xx - 跳转;
4xx - 客户端错误;
5xx - 服务器错误.
</code></pre><h1 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h1><p>关于REST API版本方面的考虑，请参考下面的文章：</p>
<p><a href="Don’t do it the following way:">Versioning REST Service</a></p>
<h1 id="RESTful架构设计"><a href="#RESTful架构设计" class="headerlink" title="RESTful架构设计"></a>RESTful架构设计</h1><p>REST是从资源（数据）操作的角度来设计API，对每个资源，我们可以叫做endpoint。</p>
<p>这些资源有独立的，也有相关的。</p>
<p>比如独立数据：</p>
<p>GET /users - 获取所有user数据<br>GET /users/123 - 获取id = 123的user数据<br>GET /posts - 获取所有post数据</p>
<p>也可以是相关数据：</p>
<p>GET /users/123/projects - 获取id = 123的user的所有的project</p>
<p>下面看一下POST方法：</p>
<p>POST /users<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  “first_name”: “Vasyl”,</span><br><span class="line">  “last_name”: “Redka”</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>POST方法用于创建数据，通常会在Body里上传需要创建的数据。在成功创建后，返回的json数据，通常会带上创建好的数据的id。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  “id”: “<span class="number">1</span>”,</span><br><span class="line">  “first_name”: “Vasyl”,</span><br><span class="line">  “last_name”: “Redka”</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>创建成功的返回码，通常是201（成功创建）。</p>
<p>下面看一下PUT。PUT用来修改已有的数据，因此通常需要传入endpoint对应数据的id。</p>
<p>PUT /users/123 - 更还id = 123的user的数据</p>
<p>如果成功，则返回200。</p>
<p>最后，看一下DELETE，通常用来表示删除数据库中的数据。</p>
<p>DELETE /users/123 - 删除id = 123的user</p>
<p>如果成功，则返回200。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://briancai.github.io/2018/09/11/RulePattern/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brian Cai">
      <meta itemprop="description" content="Brian的个人站，专注数学、编程以及新的技术">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/11/RulePattern/" class="post-title-link" itemprop="url">“规则”模式</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-11 15:52:00" itemprop="dateCreated datePublished" datetime="2018-09-11T15:52:00+08:00">2018-09-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-01-06 21:38:30" itemprop="dateModified" datetime="2019-01-06T21:38:30+08:00">2019-01-06</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Technique/" itemprop="url" rel="index"><span itemprop="name">Technique</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>(根据网上内容翻译整理排版)</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>有时候，我们的代码里会有很多条件逻辑和重复。尤其是需要对某段代码，要添加新的规则时，代码会变得越来越难以理解。</p>
<p>通常，我们可以在代码里加入一些注释来解释这些复杂条件逻辑中的不同部分的代码。</p>
<p>但是，随着时间的推移，随着条件的越来越多，会变得十分复杂。</p>
<p>下面是一段示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscountCalculator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> decimal <span class="title">CalculateDiscountPercentage</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        decimal discount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (customer.DateOfBirth &lt; DateTime.Now.AddYears(-<span class="number">65</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// senior discount 5%</span></span><br><span class="line">            discount = .<span class="number">05</span>m;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (customer.DateOfBirth.Day == DateTime.Today.Day &amp;&amp;</span><br><span class="line">            customer.DateOfBirth.Month == DateTime.Today.Month)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// birthday 10%</span></span><br><span class="line">            discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (customer.DateOfFirstPurchase.HasValue)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (customer.DateOfFirstPurchase.Value &lt; DateTime.Now.AddYears(-<span class="number">1</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// after 1 year, loyal customers get 10%</span></span><br><span class="line">                discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">                <span class="keyword">if</span> (customer.DateOfFirstPurchase.Value &lt; DateTime.Now.AddYears(-<span class="number">5</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// after 5 years, 12%</span></span><br><span class="line">                    discount = Math.Max(discount, .<span class="number">12</span>m);</span><br><span class="line">                    <span class="keyword">if</span> (customer.DateOfFirstPurchase.Value &lt; DateTime.Now.AddYears(-<span class="number">10</span>))</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">// after 10 years, 20%</span></span><br><span class="line">                        discount = Math.Max(discount, .<span class="number">2</span>m);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (customer.DateOfBirth.Day == DateTime.Today.Day &amp;&amp;</span><br><span class="line">                    customer.DateOfBirth.Month == DateTime.Today.Month)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// birthday additional 10%</span></span><br><span class="line">                    discount += .<span class="number">10</span>m;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// first time purchase discount of 15%</span></span><br><span class="line">            discount = Math.Max(discount, .<span class="number">15</span>m);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (customer.IsVeteran)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// veterans get 10%</span></span><br><span class="line">            discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> discount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="使用描述性的函数名代替布尔逻辑"><a href="#使用描述性的函数名代替布尔逻辑" class="headerlink" title="使用描述性的函数名代替布尔逻辑"></a>使用描述性的函数名代替布尔逻辑</h1><p>通常我们可以设法用描述性的函数名来组织if语句中的条件逻辑。函数名通常以英文问题的形式，从而让代码阅读起来有点象英文语句。</p>
<p>这样做的好处是让人容易阅读和理解。在这基础上，可以移去一些注释。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscountCalculator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> decimal <span class="title">CalculateDiscountPercentage</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        decimal discount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (IsSenior(customer))</span><br><span class="line">        &#123;</span><br><span class="line">            discount = .<span class="number">05</span>m;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (IsBirthday(customer))</span><br><span class="line">        &#123;</span><br><span class="line">            discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (IsExisting(customer))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (HasBeenLoyalForYears(customer, <span class="number">1</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">                <span class="keyword">if</span> (HasBeenLoyalForYears(customer, <span class="number">5</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    discount = Math.Max(discount, .<span class="number">12</span>m);</span><br><span class="line">                    <span class="keyword">if</span> (HasBeenLoyalForYears(customer, <span class="number">10</span>))</span><br><span class="line">                    &#123;</span><br><span class="line">                        discount = Math.Max(discount, .<span class="number">2</span>m);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (IsBirthday(customer))</span><br><span class="line">                &#123;</span><br><span class="line">                    discount += .<span class="number">10</span>m;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// first time purchase discount of 15%</span></span><br><span class="line">            discount = Math.Max(discount, .<span class="number">15</span>m);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (customer.IsVeteran)</span><br><span class="line">        &#123;</span><br><span class="line">            discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> discount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> bool <span class="title">HasBeenLoyalForYears</span><span class="params">(Customer customer, <span class="keyword">int</span> numberOfYears)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        numberOfYears *= -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfFirstPurchase.Value &lt; DateTime.Now.AddYears(numberOfYears);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> bool <span class="title">IsExisting</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfFirstPurchase.HasValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> bool <span class="title">IsBirthday</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfBirth.Day == DateTime.Today.Day &amp;&amp; customer.DateOfBirth.Month == DateTime.Today.Month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> bool <span class="title">IsSenior</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfBirth &lt; DateTime.Now.AddYears(-<span class="number">65</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于使用了易读的函数名，上面的这段代码读起来相当的轻松。</p>
<p>上面这段代码还能再封装得更好，从而避免函数里传递Customer对象。</p>
<h1 id="使用断言扩展方法"><a href="#使用断言扩展方法" class="headerlink" title="使用断言扩展方法"></a>使用断言扩展方法</h1><p>使用扩展方法，可以很方便地移去customer参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscountCalculator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> decimal <span class="title">CalculateDiscountPercentage</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        decimal discount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (customer.IsSenior())</span><br><span class="line">        &#123;</span><br><span class="line">            discount = .<span class="number">05</span>m;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (customer.IsBirthday())</span><br><span class="line">        &#123;</span><br><span class="line">            discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (customer.IsExisting())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (customer.HasBeenLoyalForYears(<span class="number">1</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">                <span class="keyword">if</span> (customer.HasBeenLoyalForYears(<span class="number">5</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    discount = Math.Max(discount, .<span class="number">12</span>m);</span><br><span class="line">                    <span class="keyword">if</span> (customer.HasBeenLoyalForYears(<span class="number">10</span>))</span><br><span class="line">                    &#123;</span><br><span class="line">                        discount = Math.Max(discount, .<span class="number">2</span>m);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (customer.IsBirthday())</span><br><span class="line">                &#123;</span><br><span class="line">                    discount += .<span class="number">10</span>m;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// first time purchase discount of 15%</span></span><br><span class="line">            discount = Math.Max(discount, .<span class="number">15</span>m);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (customer.IsVeteran)</span><br><span class="line">        &#123;</span><br><span class="line">            discount = Math.Max(discount, .<span class="number">10</span>m);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> discount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerExtensions</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> bool <span class="title">HasBeenLoyalForYears</span><span class="params">(<span class="keyword">this</span> Customer customer, <span class="keyword">int</span> numberOfYears, DateTime? date = <span class="keyword">null</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!customer.IsExisting())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        numberOfYears = -<span class="number">1</span> * numberOfYears;</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfFirstPurchase.Value &lt; date.ToValueOrDefault().AddYears(numberOfYears);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> bool <span class="title">IsExisting</span><span class="params">(<span class="keyword">this</span> Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfFirstPurchase.HasValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> bool <span class="title">IsSenior</span><span class="params">(<span class="keyword">this</span> Customer customer, DateTime? date = <span class="keyword">null</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfBirth &lt; date.ToValueOrDefault().AddYears(-<span class="number">65</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> bool <span class="title">IsBirthday</span><span class="params">(<span class="keyword">this</span> Customer customer, DateTime? date = <span class="keyword">null</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        date = date.ToValueOrDefault();</span><br><span class="line">        <span class="keyword">return</span> customer.DateOfBirth.Day == date.Value.Day &amp;&amp; customer.DateOfBirth.Month == date.Value.Month;</span><br><span class="line">        ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DateTimeExtensions</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DateTime <span class="title">ToValueOrDefault</span><span class="params">(<span class="keyword">this</span> DateTime? dateTime, DateTime? defaultValue = <span class="keyword">null</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        defaultValue = defaultValue.HasValue ? defaultValue.Value : DateTime.Now;</span><br><span class="line">        <span class="keyword">return</span> dateTime.HasValue ? dateTime.Value : defaultValue.Value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="规则设计模式"><a href="#规则设计模式" class="headerlink" title="规则设计模式"></a>规则设计模式</h1><p>上面提到的代码重构确实有很大的帮助，但它们并没有减少代码的复杂程度和重复，也没有解决因为规则的增多而带来的复杂性。</p>
<p>规则设计模式就是用来解决这种问题的。</p>
<p>它的中心思想就是把规则从规则的处理逻辑重分离出来。这样再增加规则的时候，就不用改变系统的其它部分。</p>
<p><img src="/2018/09/11/RulePattern/rules-pattern.png" alt="规则模式"> </p>
<p>在规则设计模式中，Evaluator类循环处理并执行规则集合。它计算规则的结果，并调用对应的动作。在最简单的场景中，它仅仅就是执行所有的规则，但也可以增加一些选择逻辑，允许Evaluator类决定是否运行规则。</p>
<p>规则实现了一个简单的接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IDiscountRule</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function">decimal <span class="title">CalculateCustomerDiscount</span><span class="params">(Customer customer)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">同时，规则实现了一个简单的责任，可以简单也可以复杂：</span><br><span class="line"></span><br><span class="line">public class BirthdayDiscountRule : IDiscountRule</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> decimal <span class="title">CalculateCustomerDiscount</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customer.IsBirthday() ? <span class="number">0.10</span>m : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>甚至可以在其它规则中重用规则，比如BirthdayDiscountRule被用在LoyalCustomerRule：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class LoyalCustomerRule : IDiscountRule</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> readonly <span class="keyword">int</span> _yearsAsCustomer;</span><br><span class="line">    <span class="keyword">private</span> readonly decimal _discount;</span><br><span class="line">    <span class="keyword">private</span> readonly DateTime _date;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LoyalCustomerRule</span><span class="params">(<span class="keyword">int</span> yearsAsCustomer, decimal discount, DateTime? date = <span class="keyword">null</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _yearsAsCustomer = yearsAsCustomer;</span><br><span class="line">        _discount = discount;</span><br><span class="line">        _date = date.ToValueOrDefault();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> decimal <span class="title">CalculateCustomerDiscount</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (customer.HasBeenLoyalForYears(_yearsAsCustomer, _date))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> birthdayRule = <span class="keyword">new</span> BirthdayDiscountRule();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> _discount + birthdayRule.CalculateCustomerDiscount(customer);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上面的代码重构中，RulesDiscountCalculator就是Evaluator。它保存有一系列规则，用于计算折扣，并循环每个规则，并找到最大的折扣。这里规则是手工加入集合的。实际中，可能会自动装载进入集合。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public class RulesDiscountCalculator : IDiscountCalculator</span><br><span class="line">&#123;</span><br><span class="line">    List&lt;IDiscountRule&gt; _rules = <span class="keyword">new</span> List&lt;IDiscountRule&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RulesDiscountCalculator</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _rules.Add(<span class="keyword">new</span> BirthdayDiscountRule());</span><br><span class="line">        _rules.Add(<span class="keyword">new</span> SeniorDiscountRule());</span><br><span class="line">        _rules.Add(<span class="keyword">new</span> VeteranDiscountRule());</span><br><span class="line">        _rules.Add(<span class="keyword">new</span> LoyalCustomerRule(<span class="number">1</span>, <span class="number">0.10</span>m));</span><br><span class="line">        _rules.Add(<span class="keyword">new</span> LoyalCustomerRule(<span class="number">5</span>, <span class="number">0.12</span>m));</span><br><span class="line">        _rules.Add(<span class="keyword">new</span> LoyalCustomerRule(<span class="number">10</span>, <span class="number">0.20</span>m));</span><br><span class="line">        _rules.Add(<span class="keyword">new</span> NewCustomerRule());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> decimal <span class="title">CalculateDiscountPercentage</span><span class="params">(Customer customer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        decimal discount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        foreach (<span class="keyword">var</span> rule in _rules)</span><br><span class="line">        &#123;</span><br><span class="line">            discount = Math.Max(rule.CalculateCustomerDiscount(customer), discount);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> discount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://briancai.github.io/2018/09/02/DecisionTable/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brian Cai">
      <meta itemprop="description" content="Brian的个人站，专注数学、编程以及新的技术">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/02/DecisionTable/" class="post-title-link" itemprop="url">决策表</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-02 15:52:00" itemprop="dateCreated datePublished" datetime="2018-09-02T15:52:00+08:00">2018-09-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-01-07 22:35:51" itemprop="dateModified" datetime="2019-01-07T22:35:51+08:00">2019-01-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/technique/" itemprop="url" rel="index"><span itemprop="name">technique</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>决策表，也叫判定表。它是分析和表达多逻辑条件下执行不同操作的情况的工具。</p>
<p>它可以把复杂的逻辑关系和多种条件组合的情况表达得比较明确。方便开发人员无需知道背后得逻辑关系，就能看出动作的对应的状态。<br>决策表</p>
<p>决策表一直被用来表示和分析复杂逻辑关系。决策表很适合描述不同条件集合下采取行动的若干组合的情况。</p>
<p>决策表的条件是真值表，保证能够考虑了所有可能的条件组合。我们把条件解释为输入，行动解释为输出。</p>
<p>决策表是说明性的，给出的条件没有特别的顺序，而且所选择的行动发生时，也没有任何特定顺序。</p>
<p>决策表有四个部分：条件桩（condition stub），动作桩（action stub），条件项（condition entry），行动项（action entry）。</p>
<p><img src="/2018/09/02/DecisionTable/decision-tables.gif" alt="决策表"> </p>
<p>条件桩：列出问题的所有条件。列出的条件的次序无关紧要。</p>
<p>动作桩：列出问题规定的可能采取的操作。这些的操作也没有顺序约束。</p>
<p>条件项：列出针对它所列条件的取值，即在所有可能情况下的真假值。</p>
<p>动作项：列出在条件项的各种取值情况下应该采取的动作。</p>
<p>规则：任何一个条件组合的特定取值及其相应要执行的操作。在决策表中贯穿条件项和动作项的一列就是一条规则。显然，决策表中列出多少组条件取值，也就是有多少规则，条件项和动作项就有多少列。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://briancai.github.io/2018/08/05/MeasureTheroy/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brian Cai">
      <meta itemprop="description" content="Brian的个人站，专注数学、编程以及新的技术">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brian的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/08/05/MeasureTheroy/" class="post-title-link" itemprop="url">测度论基本概念</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-05 15:52:00" itemprop="dateCreated datePublished" datetime="2018-08-05T15:52:00+08:00">2018-08-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-01-06 21:36:24" itemprop="dateModified" datetime="2019-01-06T21:36:24+08:00">2019-01-06</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Math/" itemprop="url" rel="index"><span itemprop="name">Math</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>（根据网上内容整理排版）</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>长度是怎样炼成的？</p>
<p>点没有长度和面积，为什么由点组成的线和面会具有长度和面积？</p>
<p>“长度”，“面积”这些词汇究竟是在怎样的意义上被使用的？</p>
<p>有的时候我们把点的长度叫做零，有的时候叫做无穷小，这两个称呼是不是都有道理？</p>
<p>无穷个零相加是不是还得零？（其实和第一个问题是一个意思，无穷个点怎么加成线段的？）</p>
<p>还有很多类似的问题。</p>
<p>在哲学上这些词汇常常导致混乱的争论，比如芝诺悖论之类。幸运的是，早在一百年前，通过一大批杰出的数学家的努力，以上这些问题已经被精确地给出了解答，这就是在数学中被称为“测度论”的一套理论体系。</p>
<p>这里“精确”的意思是说，这套理论体系完全基于形式逻辑，而且只采用了非常少的公理，从而，在这套理论中不存在任何模糊或者逻辑上模棱两可之处（除了几个需要加以特别说明的地方）。换句话说，我们不仅可以认为数学家能够确定无疑的回答以上这些问题，而且可以认为人类在今天能够确定无疑的回答以上这些问题（在承认那些公理的前提下）。</p>
<p>下面开始介绍“测度论”的基本概念。</p>
<h1 id="一、无穷的势，无穷的可数性"><a href="#一、无穷的势，无穷的可数性" class="headerlink" title="一、无穷的势，无穷的可数性"></a>一、无穷的势，无穷的可数性</h1><p>当使用“无穷”这个词的时候，必须理解什么是势。对它的清晰阐释开始于伟大的德国数学家康托Georg Cantor(1845-1918)。</p>
<p>我们说一个集合有无穷多个元素的时候，我们必须指明这里的无穷是哪一种，是“可数无穷”还是“不可数无穷”。虽然都是无穷集合，但是它们会体现出截然不同的性质。</p>
<p>为了说明这一问题，我们引进集合的“势（cardinality）”的概念。简单说来，势就是集合的元素的个数。一个集合有三个元素，我们就称其势为3。两个集合如果元素个数相等，我们就称它们为等势的。——很显然，要判断两个集合是不是等势，只需要看这两个集合之间能不能建立起元素的一一对应即可，如果可以的话，我们就说这两个集合的元素是一样多的。</p>
<p>到这里为止都显得很简单。可是最有趣的部分马上就要出现了：康托指出，不但对于有限个元素的集合我们可以讨论它们的势，对于无穷个元素的集合，我们同样可以讨论它们之间是否等势。换句话说，我们可以讨论两个无穷集合的元素是不是一样多！</p>
<p>之所以如此，是因为集合之间的“一一对应”本质上只是个数学概念，是可以被精确研究的对象（请回忆高中数学课本关于映射的那一章）。从而，随便拿两个集合来，它们之间是否能建立一一对应只是数学上的问题而已。</p>
<p>以下是一些最基本也是最著名的例子和命题，请尽量耐心的阅读。所有这些陈述都是可以基于最简单的形式逻辑给出严格证明的，证明可以在参考文献上查到：</p>
<p>·每一个集合都和它自身等势。</p>
<p>注：废话。</p>
<p>·全体正整数的集合和全体正偶数的集合等势。</p>
<p>注：这是第一个有趣然而迷惑人的结果。我们等于是在说：一个集合可以和它的一部分一样多！——但是这并不是一个悖论。我们通常觉得一个集合不能和它的一部分一样多只是针对有限集合而言的，本来就没人说过无限集合不能和它的一部分一样多，只是有时候大家会不自觉地有这个误解而已。</p>
<p>·全体正整数的集合和全体有理数的集合等势。</p>
<p>注：这是在数学上很重要的一个例子，说明一个实数中的稠密集可以和一个离散集等势。</p>
<p>·全体正整数的集合和全体实数的集合不等势。</p>
<p>注：睁大眼睛，迄今为止最重要的一句话出现了！你永远不可能在全体正整数的集合和全体实数的集合之间建立起一一对应来。对这个陈述的证明是数学上最有趣也最迷人的证明之一，可惜的是篇幅所限我不能在这里证明给大家看。那么只讨论结论好了：并不是所有的无穷集合都是等势的，有一些无穷集合比另一些无穷集合的元素更多，换句话说，无穷之间也是有大小的。</p>
<p>·任给一个无穷集合，我们都能够造出一个集合包含它，而且和它不等势。</p>
<p>注：换句话说，无穷和无穷相比，没有最大，只有更大。——但是请注意，虽然我们能够造出越来越大的无穷集合，但是我们并不真正对那些太大的无穷感兴趣，因为和这个世界没什么关系。</p>
<p>·如果两个集合都和第三个集合等势，那么它们彼此也等势。</p>
<p>注：好像也是废话，但是它引出了下面的重要陈述。</p>
<p>·有很多集合都和全体正整数的集合等势，从而它们彼此也等势，我们称所有这样的集合为“可数无穷的（countably infinite）”。有很多无穷集合比全体正整数的集合的势更大，我们称所有这样的集合为不可数无穷的（uncountably infinite）。但是，不存在无穷集合的势比全体正整数的集合的势更小。</p>
<p>注：我们待会儿再来讨论为什么起这么两个名字。前面的例子告诉我们，全体正偶数的集合是可数无穷的，全体有理数的集合是可数无穷的，但是全体实数的集合是不可数无穷的。</p>
<p>·在不可数无穷集合中间，有些集合是和全体实数的集合等势的，这些集合被称为“连续统（continuum）”</p>
<p>注：好了，现在我们对全体无穷集合建立了一个简单的分类。最小的一类称为可数无穷集。剩下的都叫不可数无穷集。不可数无穷集里面又有特殊的一类叫作连续统，剩下当然还有一些非连续统的不可数无穷集，但是它们几乎和真实世界没有任何关系，所以忽略之。（有人不愿意忽略它们，非要去研究里面的一些麻烦的问题，于是产生了数学中间最让人头晕的一部分结论，比如什么哥德尔不完全性定理之类……这个定理偏偏还特别著名，很多人都问过我它究竟说的是啥。相信我，你不可能弄明白的。）</p>
<p>也就是说，我们真正关心的是两类特殊的无穷集合，一类称为可数无穷集，一类称为连续统。所有的可数无穷集彼此等势，所有的连续统彼此等势，但是任何可数无穷集和连续统之间不等势，后者总是更大一些。</p>
<p>下面是一些可数无穷集和连续统的例子：</p>
<p>可数无穷集：</p>
<p>自然数集，整数集，有理数集。（基本上，如果你在平面上或者直线上随手点无穷个点，并且这些点彼此都不挨着，那么它们的总数就是可数无穷的。但是也存在一些不这么简单的可数无穷集。）</p>
<p>连续统：</p>
<p>实数集，直线上点的个数，平面上点的个数，一个正方形里点的个数，或者简而言之，一切几何对象里的点的个数都是连续统。（这里一个常常被人提到的推论就是直线上的点和平面上的点一样多，——都是连续统那么多。其实证明很简单，但是一言难尽，请查书去。）</p>
<p>好了，现在我们可以讨论这两个名字是怎么来的了。请注意，所有的可数无穷集都是可以和正整数建立起一一对应的，这是什么意思呢？这意味着，我们可以把一个可数无穷集中的每个元素都对应到一个正整数，这相当于给他们编了号码，从而我们可以去数它们（这就是可数这个词的来历）。也就是说，我们可以按照1号、2号、3号这么一直数下去，虽然总数是无穷的，但是只要我们在理论上一直数完所有的自然数，我们就能真正数遍这个集合的所有元素（至少在想像里是这样）。</p>
<p>而连续统集合却不是这样。一个直线上的点是连续统，这就是说，无论怎么巧妙的给这些点编号，我们都是不可能给所有的点都编上号码然后一个一个的数下去把它们都数完的。它们是“不可数”的。</p>
<p>有人会说，这不是自欺欺人么？反正都是无穷个，反正事实上总也不可能数得完，那么在理论上区分“想像中数得完”和“想像中也数不完”有什么实际意义呢？</p>
<p>有的。正是这一点微妙的差别，使得有些事情我们能够对可数集去做却不能对连续统集合去做，也正是这一点差别，促成了从没有大小的点到有大小的直线和平面之间的巨大的飞跃。</p>
<h1 id="二、测度的建立"><a href="#二、测度的建立" class="headerlink" title="二、测度的建立"></a>二、测度的建立</h1><p>让我们暂时放下关于无穷的那些讨论，回到主题：我们通常所说的长度面积体积这些词，究竟是什么意思？</p>
<p>为了更清楚的阐明这个主题，我们把目光只集中在最简单的一维情形，也就是说，我们只考虑“长度” 这个词。我们希望，取出直线上的一部分，就有一个“长度” 存在。如果能做到这一点，那么类似的，面积和体积之类的高维词汇也可以类似的得以理解。</p>
<p>我们把目前要回答的问题列在下面：</p>
<p>·什么是长度？</p>
<p>·是不是直线上任何一部分都可以有长度？直线上的一个线段当然应该有长度，直线上的两段分离的线段也有总长度，单点有没有长度呢？随便从直线上挖出一些点来得到的也许是虚虚实实的一个“虚线段”有没有长度？是不是我们从直线上任意取出一个子集合(线段啦单点啦都可以看成是直线的特殊的子集合)，都可以定义它的长度？</p>
<p>——这件事无论在数学上还是应用上都是重要的，如果能够给直线的任何子集定义长度，那就太方便了。</p>
<p>·如果上面这件事是可以的话，那么随便给一个直线上的点集，长度怎么计算？</p>
<p>等等等等。</p>
<p>事实上，在数学中这些问题都能够得到解答，但是首先让我们把上面问题里的“长度”这个词都换成更准确的一个术语：测度(measure)。之所以要采用这么一个新造的词，首先是因为“长度”有时候有局限性。一个线段的长度好理解，一个复杂的点集，说长度就会显得很奇怪；不仅如此，在二维情形下我们还要研究面积，三维还要研究体积，四维还要研究不知道什么积……为了省去发明一个又一个新词的苦恼，我们把这些东西统一叫做二维测度，三维测度……一了百了。</p>
<p>好吧，那么，我们来定义(一维)测度。</p>
<p>——不，不要误会，我并不是要在此刻写出一大段难懂的话，告诉大家“测度就是什么什么什么什么。” 或者更谦逊一点，说“我认为，测度就是什么什么什么什么。” ——也许这是一般人看来自然不过的工作方式，但不是数学家的。</p>
<p>这是因为，我们现在要定义的是某种特别基础的概念。也许在定义某些很复杂的高层概念的时候这种方式很自然，可是概念越基础，这种方式带来的问题就越大。关于测度这种层次的概念几乎必然伴随着用语言难于精确描述的种种晦涩的思考，一旦一个人试图把他对这个词的理解宣诸笔墨，那么无论他多么小心翼翼的整理他的陈述，在别人看起来他的定义都必然漏洞百出，有无数可以商榷的地方。——而因为这个概念在整个逻辑体系中的位置过于基础，任何商榷又都必然说起来云山雾罩，像哲学家们通常进行的关于基础概念的争论一样令人头昏脑胀。如果数学家们要开会用这种方法给出测度的定义，那一百个数学家一定会提出一百零一种定义来，最终的结果是什么有效的结论也得不到。</p>
<p>数学家们采用的是完全不同的方式：我们先不要贸然去说“什么是测度”，而是先问问自己，当我们想发明一个新的定义的时候，我们在这个定义的背后是想达到怎样一种目的？换句话说，我们想让这个定义实现哪些事情？</p>
<p>首先，测度——不管它具体怎么定义，其作用的对象按照我们的期望是直线上的任意一个子集，而最后得到的测度应该是一个具体的数字。也就是说，所谓定义测度，就是我们需要找到一种方法，使得随便拿来直线上的一个子集，我们都能够最终得到一个数字作为其“长度”。 （在这里我们把无穷大也看成是测度，例如整根直线的测度就是无穷大。）</p>
<p>然后，这种方法总要满足一些必要的约束。——不能随便给一个线段标上一个数字，就说它是测度了。这些约束有哪些呢？</p>
<p>第一，空集（注意是说空集而不是说单点集）本身也是直线的子集，也应该有个测度。我们应当保证空集的测度是零。这是很显然的，否则这个测度就毫无实际意义了。</p>
<p>第二，既然每个子集都有一个测度，那么把两个彼此本身不相交的子集并在一起得到的新的子集也应该有个测度，并且这个测度应该等于两者之和。——这也是很直观的要求。两个线段如果不相交，那么他们的总长度应该等于两者长度之和。更高维的情况也一样，两个二维图形如果不相交，那么总面积应当等于各自面积之和，诸如此类。</p>
<p>更进一步，三个不相交子集的测度之和也应该等于这三个子集并起来的集合的测度，四个也对，五个也对，依此类推，无穷个不相交子集的测度之和也应该等于把它们并起来得到的集合的测度。——注意，是可数无穷个！</p>
<p>(为什么呢？直接说任意无穷个不好么？干嘛只限定是可数无穷个？)</p>
<p>数学家是很谨慎的。上面这个性质被称为可数无穷个集合的测度的“可加性” ，承认可数无穷个集合有可加性是不得不为之，因为在实际应用中我们确实常常会遇到对可数无穷个子集求总测度的问题，可是任意无穷个子集的测度也能相加，这个陈述就太强大了，我们一时还说不好测度有没有这么强的性质，还是先只承认可加性对可数无穷个集合成立好了。</p>
<p>第三……</p>
<p>“且慢” ，数学家说，“先别找太多的约束，看看这两条约束本身能够在多大程度上给出测度的定义好了。”</p>
<p>(什么嘛，这两条约束根本什么都没说。第一条是废话，第二条也是很显然的性质，要是只满足这两条就可以叫做测度，那测度的定义也太宽松了，我随随便便就能构造出好多种不同的测度出来。)</p>
<p>也许是这样，可是到时候再添上新的约束也不迟。这也是数学家们常用的办法，先定义尽量宽松的概念，然后再一点一点的附加条件，得到更细致和特殊的子概念。就目前的情况来说，看起来这两条约束确实是宽松了点……</p>
<p>不幸的是，——也许出乎你的意料，——这两条约束不是太宽松，而是已经太严苛了。</p>
<p>我们可以证明，给直线的每个子集都标上数字作为测度，保证空集的测度是零，并且测度满足可数无穷个集合的可加性，这件事情在逻辑上并无内在的矛盾，但是这样的测度必然具有一些数学上非常古怪的性质。也就是说，这样的测度根本不能用来作为对长度的定义！</p>
<p>（关于这件事的证明其实很简单，但是需要一点数学基础才能读懂，详情可以参考文献。关于什么是“古怪的性质”，后面还会提及。）</p>
<p>在这种情形下，我们只好退而求其次，减少对测度这个概念的期望。——可是前面提到的两条性质都再基本不过了，如果连它们都不能满足，我们定义出来测度又有什么用呢？——于是数学家们另辟蹊径，不是放松这两条限制，而是放松它们的适用范围：我们不去强求测度能对直线的每个子集都有定义，也就是说，我们只挑出直线的一些子集来定义测度，看看能不能避免逻辑上的困境。</p>
<p>需要挑出那些子集呢？很显然，我们希望对于平时人们能接触到的各种常见的子集都能定义测度，所以单点集是需要的，线段也是需要的，而若干线段的交集或并集（这里若干还是指至多可数个）也是需要的，对它们的交集或并集再作交集或者并集也是需要的……</p>
<p>在数学中，我们把所有线段反复做交集或并集生成的这一大类集合称为可测集（当然它有更严格的定义，不过大概就是这个意思）。不要小看这种生成方式，事实上，你能想象得到的直线的子集其实都是可测集，——要找出一个非可测集的集合反倒是有点困难的事情。虽然可测集不包括直线的全体子集，但是如果我们能对所有可测集定义合理的测度，那这个测度也足以应付人们的需要了。</p>
<p>所幸的是这确实是可以做到的。在测度论中有很大的一部分篇幅是用来论述测度是怎么对可测集得以建立的，这部分内容一般被表述为一个称为Caratheodory’s theorem的理论。言简意赅地说：是的，只针对可测集定义的，满足前面那两条假设的“合理”测度总是能够建立得起来的。这里所谓的“合理”，就是说它能够用来作为我们心目中那个“长度”而存在。为了说明这一点，让我们想想我们离我们的目的地还差多远：直到现在为止，我们还是完全不知道一个测度究竟是什么样子。举例来说，按照我们的想法，一个单点集的测度应当是零（对应于点没有长度的直观），而实数轴上从0点到1点的线段的测度应当是1，更一般地，从a点到b点的线段的测度应当是b-a，——可是这一切我们统统还不知道呢！</p>
<p>这一切确实还未曾得到说明，而且更关键的是，仅仅有前面给出的那两条假设，我们也确实无法推理得出上面那些结论。这也是数学家们的通常做法：先有一个一般的概念，然后通过给它添上一些新的独立约束来构造出更细致的概念。我们现在已经有了一个一般的测度的概念，把它总结一下，就是说：</p>
<p>对于直线的一大类子集（也就是可测集，谢天谢地，我们在应用中真正关心的集合都属于可测集），我们能够在不伤害逻辑的自洽性的前提下，给他们中的每个都标上一个数字，称为测度，并且这些数字满足下面两条性质：</p>
<p>·空集对应的数字（空集的测度）是零。</p>
<p>·若干个（但是至多可数无穷个）彼此不相交的子集，它们并在一起得到的子集的测度，刚好等于这些子集各自测度之和。</p>
<p>我们只知道这样的测度是存在的，但是很显然并不唯一，因为我们未曾对这些具体的数值作过任何限定。为了使测度能够符合我们心目中的那个“长度”的概念，我们需要进一步添上一条需要满足的性质：</p>
<p>·如果把直线看作实数轴，那么从数轴上a点到b点的线段（这是直线的一个子集）对应的测度应当等于b-a，例如，数轴上从2到3的这一段线段的测度应该等于1。</p>
<p>乍一看这好像只是个不完全的限定，我们只规定了最简单的线段的测度，却没有规定剩下那许多奇奇怪怪的集合的测度，可是好在有数学推理来替我们包办剩下的一切：只要添上这条约束，那么所有的可测集的测度的具体大小就会以唯一不导致逻辑上的矛盾的方式被确定下来。也就是说，对于任何一个可测集，我们都有办法算出它所对应的那个唯一可能的测度来。（怎么算的？如果你不想看到数学式子的话就别问了……）</p>
<p>需要说明的是，同样也是根据这三条，我们就能够发现单点的测度必须是零（否则就会导致计算上的矛盾）。注意：这里的逻辑完全是数学的而不是哲学的，也就是说，我们是可以“推导”出单点的测度是零这样的结论的。</p>
<p>各位看到这里可能会很疑惑，我究竟在干什么？我并没有回答事先许诺要回答的任何一个问题（为什么点的长度是零而线段就不是，诸如此类），而是蛮横无理的把它们作为规定和规定的推论强制性的摆在这里，作为测度的定义的一部分。这算什么回答？</p>
<p>请允许我把对此的解释（以及对前面所有那些哲学性问题的解释）放在后面，先暂且回到测度的定义本身上来。</p>
<p>前面说了，只要能满足头两条性质，我们就称定义出来的那个东西为测度，加上第三条只是为了让这个测度符合我们对长度的具体数值的要求。也就是说，加上第三条性质后，我们定义出的应当只是测度中的具体某一种，一般把它称为勒贝格测度（Lebesgue measure）。再强调一遍，正如前面所说的那样，勒贝格测度并不能定义在直线的所有子集上而只能定义在其中的可测集上。但是我们在数学中和应用中能够遇到的集合差不多全是可测集。</p>
<p>（那就总还有几个不可测集了？是的，确实存在一些特别诡异的集合是不可测集。关于不可测集的构造和性质一直是数学上一个有趣的话题，——虽然并不重要，因为事实上在真实世界里我们遇不到它，它们只是作为抽象的数学构造出现的。我们后面还会再次谈及这个问题。）</p>
<p>既然勒贝格测度只是测度的一种，那就是说，数学上是承认不同于勒贝格测度的更一般的测度存在的。这些测度只满足三条性质的前两条，而未必满足第三条，也就是说，这些“测度”并不保证从0点到1点的线段的测度是1，甚至也未必保证单点集的测度是零。它们的性质可能和通常人们对长度的理解很不相同。</p>
<p>（为什么呢？既然明显和常识相悖，为什么还要保留这些人造的概念呢？）</p>
<p>这是因为，尽管数学家发明测度的概念的初衷确实只是想把“长度”的概念精确化和逻辑化，（事实上也确实做到了，就是勒贝格测度），但是人们很快发现，那些更一般的测度虽然未必还符合人们对“长度”这个词的理解，但是它们作为一种数学概念却能在大量的学科里得到应用，甚至成为很多理论的基础语言。一个最简单的例子是概率论，这门古老的学科在测度论建立之后就完全被测度的语言所改写，以至于今天一个不懂一般测度的人完全没办法研究概率论；另一个例子是著名的狄拉克测度（Dirac measure），这个曾经令数学家也有点头痛的非正常测度在物理学和信号处理等领域里扮演了非常关键的角色。</p>
<h1 id="三、长度的意义"><a href="#三、长度的意义" class="headerlink" title="三、长度的意义"></a>三、长度的意义</h1><p>回到我们的主题：“长度”的意义上来。</p>
<p>先总结一下我们已经知道了的事情：</p>
<p>所谓（一维）测度，就是要给直线上的每个子集标上一个数字，使得它们满足下面两条性质：</p>
<p>·空集对应的数字（空集的测度）是零。</p>
<p>·若干个（但是至多可数无穷个）彼此不相交的子集，它们并在一起得到的子集的测度，刚好等于这些子集各自测度之和。</p>
<p>这样的测度存在很多种，而且几乎全都行为古怪。为了更好的符合“长度”的概念，我们添上第三条要求：</p>
<p>·如果把直线看作实数轴，那么从数轴上a点到b点的线段（这是直线的一个子集）对应的测度应当等于b-a。</p>
<p>满足这三条性质的对直线上的每个子集定义的测度是不存在的。但是，如果放松要求，不对直线的每个子集定义而只对直线的可测子集定义测度，那么这样的测度存在并且唯一，数学上称为勒贝格测度。靠一系列定理的帮助，对直线的任何一个可测集（一般来说你能想象到的任何子集都是可测集），都有一套严密定义的公式能够把这个测度的具体大小算出来。</p>
<p>于是，数学家郑重宣布：</p>
<p>勒贝格测度就是人们通常所说的“长度”的严密定义，而且是唯一正确的定义。</p>
<p>“什么？”我们的哲学家朋友们一定要跳起来了。“你上面绕来绕去的说了一大堆让人听不懂的话也就罢了，你怎么能说这是关于长度唯一正确的定义呢？这顶多是你们数学家对这个词的理解而已，我最讨厌你们学理科的用这种自以为掌握绝对真理的口气说话了！”</p>
<p>“是么？”数学家回答道，“难道长度这个词还可能有别的理解不成？”</p>
<p>“当然可以。”哲学家愤愤不平地说。“亚里士多德说过……，莱布尼茨说过……，康德说过……，总之，人类对长度这个词的理解是经历过漫长的争论的，而且必然还会一直争论下去。每个人都有权提出自己的观点啊。”</p>
<p>“我不管他们怎么说，”数学家说，“我只问你心里有没有对长度的定义？”</p>
<p>“当然有了。”哲学家骄傲地说，“我认为，长度就是……”</p>
<p>“慢着，”数学家迫不及待的打断他，“我不想听你的哲学论文，我只问你，在你对长度的定义里，空集有没有长度？有的话，是不是零？”</p>
<p>“是……的。”其实哲学家暂时没想到空集这么细节的事情，但是他觉得反正这个无关紧要吧，所以先首肯了。</p>
<p>“那么，按照你定义的长度，数轴上从2.76这个点到6.98这个点的线段的长度，是不是等于6.98-2.76=4.22？”</p>
<p>“这个废话，不然还叫什么长度啊。”哲学家有点不耐烦了。</p>
<p>“还有，如果我把可数无穷个有长度的集合放在一起，总长度等不等于各自的长度之和？”</p>
<p>“这个……”哲学家对于“可数无穷”这个词有点拿不准，“反正两个线段的总长度是等于它们各自的长度之和的，至于无穷个……好吧就算是吧，那又怎样？”</p>
<p>“那就结了。”数学家慢条斯理地说。“我根本不关心你关于长度的哲学观念是怎么建立起来的，我只想说，如果你的观念没有内在的逻辑矛盾，那它就一定和我们数学家所说的勒贝格测度是一回事。这就是我为什么说勒贝格测度是唯一正确的长度的定义。——你当然可以有你自己的定义，只不过它一定正好就是勒贝格测度！”</p>
<p>“什么和什么呀！”哲学家有点懵了。“可是你什么也没有定义啊，你只是自己号称证明了一个所谓勒贝格测度的存在，可是我们关心的是为什么！我们哲学家要问的是为什么从2.76这个点到6.98这个点的线段的长度等于4.22，你却把它写在了定义里，这并没有回答问题本身啊。”</p>
<p>“唉，”轮到数学家不耐烦了。“从2.76这个点到6.98这个点的线段的‘长度’当然也可以不等于4.22，只要你不取勒贝格测度而换一种测度就成了，——问题是人们不喜欢那样啊。不是为什么它的长度等于4.22，而是你首先要求了4.22这一属性，然后把它叫做长度。为什么只有在春天桃花才会开？因为是你把桃花会开的那个季节叫做春天的！”</p>
<p>哲学家：“……”</p>
<p>数学家：“……”</p>
<p>嗯，我不知道这段对话是把问题讲清楚了还是搅得更混乱了。当然这里面还有许许多多的细节需要阐明，下面让我们来更仔细的讨论一下吧。</p>
<p>“长度是什么？为什么从2.76这个点到6.98这个点的线段的长度等于4.22？”正如前面那个数学家所说的，这个问法本身就是不合适的。我们给从2.76这个点到6.98这个点的线段赋予一种属性是4.22，给从姚明的头到姚明的脚的线段赋予一种属性是2.26米，现在我们把这种属性叫做长度，如此而已。——这完全是人为的设定，没有任何先验的意义。数学家已经说了，你当然也可以给从2.76这个点到6.98这个点的线段赋予另一种属性是3.86，给从姚明的头到姚明的脚的线段赋予另一种属性是0.03米，只要你足够细心，这种做法是不会引起问题的，只不过你自己定义的那种属性不再被人们称作“长度”罢了。你可以把它称为“短度”或者别的什么，没有问题。</p>
<p>有趣的是，——测度论的伟大也就体现在这里，——只要我们承认了诸如从2.76这个点到6.98这个点的线段的长度等于4.22这样一些朴素的论断，那么仅仅靠着逻辑推演，我们就能够给直线的几乎所有子集——可测集——计算出对应的“长度”来，哪怕它们已经变得不是那么直观。譬如说，单点集的“长度”是0（不是什么无穷小，就是0），2到5之间的全体无理数的集合的“长度”是3，某个广义康托集（一种有着复杂分形结构的点集）的“长度”是2.86……这一切本来似乎都可以问一问为什么的事情，其实都只是逻辑的自然推论罢了，你要是不承认它们，就必然导致逻辑上的不自洽。</p>
<p>——为什么这个东西的长度是0？那个东西的长度是2.3？为什么这个奇奇怪怪的集合也会有长度？为什么它的长度不等于别的，偏偏等于根号2？</p>
<p>因为长度满足那三条性质，所以必然如此。</p>
<p>——为什么长度要满足那三条性质？</p>
<p>因为人们把满足那三条性质的属性就叫做长度。你当然也可以用别的几条性质定义出来一个什么度，只是不能再叫长度就是了。</p>
<p>这就是“长度”这个词的全部意义。</p>
<p>“可是，”我们的哲学家还是不甚满意，“我还是觉得你没有真正回答我想问的问题。”</p>
<p>“还有什么呢？”数学家说，“我上面这些理论不都已经自圆其说了么？”</p>
<p>“就是这个自圆其说让我特别恼火。”哲学家说。“我总觉得你绕过了我真正的问题。我问为什么长度要这么定义，你说因为人们把这样定义出来的属性就叫长度，这当然没错，可是我其实想问的是，为什么会有这样一种属性存在？为什么自然界中的事物可以具有长度——或者用你的话说——这种属性？你当然可以告诉我说，因为数学上证明了你的那什么勒贝格测度一定存在，可是我不想听你那个证明，我想听到的是一个更深入的解释，为什么长度是得以存在的？”</p>
<p>“因为……因为我们能证明它实际上存在……”数学家迷惑不解的说。</p>
<p>“我不是问你它存不存在，我是问它为什么存在！”哲学家怒气冲冲的说。“你不觉得这是件不太自然的事情么？反正是一堆点，你又说了点的长度是零，可是一旦把点排列起来得到的线段就有了测度，在这个过程中发生了什么呢？这个不为零的长度是怎么出现的呢？——别又对我说你能证明它不为零，我要问的是为什么，——比证明更本质一步的那个为什么！”</p>
<p>“啊，”数学家字斟句酌地说，“你想问的其实是为什么线段的测度不等于简单地把点的测度加在一起对吧。是啊，这确实是个有趣的问题……”</p>
<p>这确实是个有趣的问题。</p>
<p>如果我们仔细检查关于勒贝格测度的那三条公理，会发现关于第一条和第三条并没有什么可多说的，可是第二条——至多可数个彼此不相交的子集的并集的测度等于这些子集各自测度之和——却多少让人心生疑惑。这句话读起来总是有点别扭。</p>
<p>如果我们把它换成“有限个彼此不相交的子集的并集的测度，等于这些子集各自测度之和”，听起来就会舒服多了，可是这里做了某种推广，从有限到无限，而且还不是任意无限个而是“至多可数无穷”个，这是为什么呢？</p>
<p>首先，这种推广是必须的：只对有限个的子集定义测度的可加性，这样得出来的测度会不满足人们的需要，——不仅仅是给长度一个精确定义的需要。测度论不只是为哲学家发明的，它要在数学的其他领域里以及别的自然科学领域里得到应用，而在这些场合里，我们时刻会碰到对无穷个集合的并集的测度的计算。我们必须在定义里就保证测度能够无穷相加。</p>
<p>而是另一方面，为什么又偏偏要限制可数无穷个集合才有可加性呢？</p>
<p>事实上，我们很容易就会发现，正是这一点促成了前面那个问题的出现：为什么线段具有长度？如果我们假设任意无穷个彼此不相交的子集的并集的测度等于这些子集各自测度之和，那么，既然线段是由无穷个点构成的而点又没有长度，那线段也应该没有长度才对。难道这一条是专门为了避免这个悖论才设置的么？</p>
<p>不是。我们很快就能看到，这种对于可数性的限制，有着更为本质的原因存在。</p>
<p>首先，让我们想想看把很多数相加是什么意思。我们一开始学到的加法是针对两个数而言的，给定任意两个数，我们能够算出它们的和。进而，我们把这一过程推广到了三个数求和：先对其中两者求和，然后再把这个和同第三者相加。依此类推，我们可以把四个数相加，把五个数相加……</p>
<p>请注意，这里的过程完全是递归的（inductively）：只有定义了n个数的和，我们才能够继而定义n+1个数的和。然后，这样一直进行下去，我们就能够对任意有限多个数求和。——只是“任意有限”，还不是“无限”。</p>
<p>从有限到无限这一步跨越其实走得颇为艰难。哲学家也好别的领域的科学家也好常常随心所欲的使用数学词汇而并不特别在意自己是否真的明了它们的严格意义，可是数学家却不能如此自由。真正把无穷个数加起来，也就是数学中所谓的“级数”（series），这套理论的严密化在数学史上经历了相当长的一段时间。最终，借助于极限理论的帮助，真正严格的关于级数求和的理论才得以建立。——也就是说，事实上，什么样的无穷级数可以相加，什么时候不能相加，相加的时候要注意什么问题，这一切都受到了理论的约束。在这些理论的基础上，我们才能够确定当我们随口说出“把这无穷个数加在一起”的时候，我们确实知道我们在说什么。</p>
<p>什么是级数呢？级数就是把有限个自然数相加的自然推广：既然定义了n个数的和我们就能够进而定义n+1个数的和，那么，把这个过程递归地进行下去，我们就能够对任意有限多个数求和。当有无穷个数需要我们求和的时候，我们就只对它们中的前N个求和，并且让这个N不断变大，如果这一过程有极限，这个极限就被我们称为这个无穷数的和。</p>
<p>请注意上面这段话背后的涵义：当我们说“对无穷个数求和”的时候，我们其实潜在地要求了这些数的总个数必须能够通过n-&gt;n+1-&gt;n+2……这样的过程来逼近，然后通过极限的方式定义它们的和。这也就是说，这些数的总个数必须是可数个！</p>
<p>让我们回忆一下什么是“可数个”：“可数个”就是能够和自然数集建立起一一对应的那么多个，用更直观的语言来说，“可数个”就是“可以一个一个数下去”的那么多个。只有一个集合里包含可数个元素的时候，我们才能够对于它应用数学归纳法，因为数学归纳法的本质就是“一个一个数下去”：当一件事对n成立时，我们进而要求它对n+1成立，这样的过程进行下去的极限，就是可数无穷。</p>
<p>那么，既然多个数的加法本质上是个递归过程，——只有先把n个数加起来，我们才能进而加上第n+1个数，——所以加法至多能对“可数无穷”个数来定义（也就是级数加法）。把“不可数无穷个”数加在一起，这件事情是毫无意义的！</p>
<p>这正是前面所有那些所谓哲学悖论的根源：当人们想当然的说着“把无穷个点的测度加在一起”的时候，他们以为他们是在说一件自然而然的事情，可是事实上，除非这无穷个点是可数个，否则这里的加法根本无法进行。不幸的是，任何线段都偏偏是由不可数个点构成的（它们是连续统）。</p>
<p>为什么线段是由点构成的，而线段的测度却不等于组成它的那些点的测度之和？因为“组成它的那些点的测度之和”这个短语根本没有意义，所以两者也不必相等。</p>
<p>这个回答也许有些出人意料，可是事情就是如此。很多问题之所以令人迷惑，不是因为它们真的是什么悖论，而只是因为问题本身没有被恰当的叙述。人们常常自以为是的使用很多词汇却罔顾自己是不是了解它们的真实含义，譬如说“求和”。人们随心所欲地说“把若干个数加在一起”却忘了其实不可能真的把它们“一下子”加在一起，加法是个递归过程，这就决定了如果要加的东西的个数太多（不可数那么多），它们就加不起来了。</p>
<p>（不得不补充一点——一个很扫兴的补充——在数学中，某些场合下我们真的必须要对不可数个数定义总和……数学家总是这样，为了各种极端情况而拓展自己的定义。在这些情况下，这种不可数个数的和也是能定义出来的。但是，这件事并不会对上面那些论述造成削弱：这里的特殊意义上的“和”是为了应付特别的目的而定义的，它和我们平时所说的求和已经不是一个意思了。）</p>
<p>也许哲学家还会追问：既然线段的测度不是组成它的那些点的测度之和，那么这个测度是从哪里来的呢？</p>
<p>它们不是哪里来的……它们是线段自己所固有的。这就是为什么我们在定义长度的时候非要加上第三条公理的原因：我们必须在定义里就写明线段的测度，否则就没有办法建立起直线的所有可测子集的测度的架构。事实上，既然点的长度是零，根据可数可加性我们很容易推出一切可数集的长度也都是零，所以在某种意义上说来，“长度” 是本质上只属于连续统的一种性质。换句话说，只有进入了连续统的范畴，不为零的长度才可能出现。这就是为什么我们不能从单点集出发定义长度的原因。</p>
<p>那么，我们现在可以回答那个著名的“飞矢不动”的悖论了：一支飞驰的箭，在每一个确定的时刻都静止在一个确定的位置上，为什么经过一段时间后会移动一段距离？</p>
<p>答案是：因为任何一段时间（不管多么短暂）都是一个连续统，包含了不可数个时刻，所以箭在每一时刻的静止根本不需要对一整段时间之内的移动负责。——后者并不是前者的相加，而前者也根本不可能相加。</p>
<p>因为连续统不可数，所以我们能够在每时每刻里都静止的存在，同时又能在一段时间内自由运动。这也许是大自然的巧妙安排吧。</p>
<h1 id="四、若干注记"><a href="#四、若干注记" class="headerlink" title="四、若干注记"></a>四、若干注记</h1><p>长度的意义说了这么多，到此差不多就可以告一段落了。但是关于在前面的讨论中出现的许多数学概念和思想，却还不妨多说几句。事实上，测度论虽然只是数学中一个具体的分支，但是它的发展和演进却和数学史上最有趣的篇章之一——所谓的“第三次数学危机”——联系在一起。关于这桩公案，坊间的科普书目已经汗牛充栋，我也并不想在这里再重复一遍那些随手就可以找得到的八卦，而只是想针对某些特别的概念和理论略加说明，至少，这对愿意继续阅读别的数学或者数学科普著作的朋友来说，会有点作用吧。</p>
<ol>
<li>无穷小</li>
</ol>
<p>这个概念无疑常常困扰没有受过现代数学训练的阅读者们，这是很自然的事情，因为它可以从直觉上意识得到，却又难于精确地把握：无穷小是什么？是不是可以精确定义的数学概念？它是一个数？还是一段长度？能不能对无穷小做计算？诸如此类等等。由于这个概念几乎天然的和各种哲学式的思辨联系在一起，使得甚至哲学家们也对它颇为关注，——当然，还有数之不尽的民科们。</p>
<p>关于无穷小的讨论者，最著名的大概莫过于莱布尼茨，他花了大把的精力试图精确阐述无穷小的概念并且以此作为整个微积分学的基石。在莱布尼茨看来，无穷小是一个比任何数都小但是不等于零的量，对它可以做四则运算，尤为关键的是可以做除法：两个相关的无穷小量的比值就是一个函数的导数。以此为基本语言他开始建立微积分学的基本理论，——他基本上成功了。直至今天，数学家采用的关于微分的记号仍然来自莱布尼茨，而数学学科内部关于微积分学的专门称呼——“分析学”——也来自于莱布尼茨自己对他的理论的叫法：无穷小分析。尽管牛顿和莱布尼茨在微积分的发明权上争得不可开交，可是几个世纪过去，至少在这两件事情上莱布尼茨大获全胜。</p>
<p>可是，也许你想不到的一件吊诡的事情是：尽管莱布尼茨在微积分学的建立过程里做出如此重要的贡献，他的思想的基石——无穷小量——却是一个在今天的数学语言里被完全抛弃了的概念。人们发现这个词汇除了带来混乱之外并没有什么特别的用处，于是作为一种语言，它被丢弃了。事实上，即使在莱布尼茨的同时期人看来，无穷小也是一个有点让人不舒服的词：比任何大于零的数都小，却不是零。我们当然可以把它仅仅作为一种人为的逻辑概念来使用，可是这样一个怪东西的存在，既使得数学的基本对象——实数的结构变得混乱，也在很多场合带来了麻烦的难于回答的问题（尽管它也确实带来了不少方便）。在分析学蓬勃发展的十八世纪，一代又一代数学大师为此争论不休，大家混乱而各行其是地使用这个词，却没人能说清楚它的精确含义。终于，从十九世纪初期开始，以柯西（Cauchy）和魏尔斯特拉斯（Weierstrass）为代表的一大批数学家开始为分析学的严密化做出了大量的工作，他们试图在完全不采用“无穷小量”这个概念的前提下重新建立整个分析学，——他们也成功了。</p>
<p>于是这个词就被抛弃了。时至今日，这个词尽管在很多数学书里仍然会出现，但是这时它仅仅作为一个纯粹修辞上的词汇而不是严格的数学概念，——人们通常用它来指代“极限为零的变量”（感谢十九世纪那一大批数学家，极限这个词已经是有了严密清晰的定义而不再仅仅是某种哲学性的描述），也有的时候它被用来作为对微积分运算中的某些符号的称呼，但是无论何时，人们在使用它的时候都明确的知道自己想说什么，更关键的是，人们知道自己并不需要它，而只是偶尔像借助一个比喻一样借助它罢了。</p>
<p>那么，回到这个词最本源的意义：到底有没有这样一个量，比一切给定的正实数都小却又不是零？或者这个问题还有一系列等价的提法：在直线上存不存在两个“相邻”的点？存不存在“长度”的最小构成单位？等等等等。</p>
<p>在今天我们已经能够确定无疑的回答这些问题了：不，不存在。</p>
<p>事实上，这个问题的彻底解答甚至比柯西和魏尔斯特拉斯的时代还要晚：它本质上是关于实数的结构的理解的问题。即使柯西本人——尽管他奠定了现代极限理论的基础——也并不真正了解“实数是什么”这样一个简单的问题。关于严密的实数理论的最终建立，一般认为是皮亚诺（peano），康托（Cantor）和戴德金（Dedekind）这几位十九世纪下半叶的数学家的成就。所谓的“戴德金分划”仍然是今天的教科书里对“实数”这一概念所介绍的标准模型。在这套模型里，人们能够在逻辑上完全自洽的前提下回答有关实数结构的一切问题，而正如前面指出过的那样，它完全摈弃了“无穷小”的存在。</p>
<p>（是不是数学家说无穷小量不存在，这个词就没意义了呢？）</p>
<p>这又回到了前面我们屡次面对的那个关于数学断言的权威性的问题。如果承认无穷小是一个有关数的概念，那么，数学家的工作已经告诉我们，在实数理论中没有无穷小的位置。事实上，康托本人就曾经证明过承认无穷小是同承认实数中基本的阿基米德原理相矛盾的。（阿基米德原理是一个关于实数性质的基本原理，如果阿基米德原理是错的，整个数学大概都无法得以建立。）但是，如果把问题拉到数学的疆域以外，如果认为人们有权利不按照数学家的方式讨论数本身的性质，那么我们面对的就已经是全然另一层次的问题，——也就不可能在这里得到详尽的讨论了。</p>
<ol start="2">
<li>无穷大</li>
</ol>
<p>有趣的是，和无穷小如此相似的一个词——无穷大——却在今天的数学语言中占有与之判若云泥的一个地位：人们谈论它，研究它，还给它以专门的记号（倒8字）。造成这一多少有点奇特的事实的关键在于，和通常人们的误解不同，无穷大其实并不是无穷小这个词在概念上的对偶（尽管乍一看似乎如此）。事实上，就某种意义而言，说它是零这个词的对偶也许更为恰当一些。</p>
<p>让我们回顾一下这个概念在数学中的递进过程：我们都知道存在这样的数列（例如自然数列），可以一直变得越来越大，直到比任何给定的数都更大，这种时候，我们把这样的数列称为“趋于无穷大”或者直接就简称它是无穷大。——请注意，在这里无穷大仅仅是作为人们对一个数列或者变量的极限的叫法而存在的，我们并没有承认它是一个数或者一个确定的对象，而只是一个形容词而已。每个具体的数都不可能真的比别的数都大，尽管一系列数可以没有止境地变得越来越大，这实质上就是亚里士多德所强调的“潜无穷”。</p>
<p>如果事情只是到此为止，那一切相安无事，无穷大这个词今天的地位也只不过和无穷小一样仅仅作为对一种极限的描述而存在罢了。可是这里有某种微妙的差别：正如前面提到过的那样，“无穷小”不是别的，只是一个变量极限为零而已，所以我们总可以认为无穷小只是一种说法，在必要的时候可以用“趋于零”这样一个替代说法来换掉它。可是“无穷大”是什么极限呢？它并不是趋于任何特定数字的极限，而是“趋于无穷大的极限”，你看，这个词轻易回避不掉。</p>
<p>于是人们只好被迫不断的提及它，要是非要替换成别的说法，就要花好多倍唇舌才成。比如，前面说过直线本身也是直线的可测子集，那么整条直线的测度是多少？当然我们可以佶屈赘牙地说“直线可测，但是它的测度并不是一个确定的数，而只是比任何给定的实数都要大。”——这也太麻烦了一点。为什么不省点事直接说“直线的测度等于无穷大”呢？</p>
<p>这样人们就开始不断的把无穷大当一个名词来使用，假装它好像也是一个数一样，这就是所谓的“实无穷”。哲学家和数学家中比较喜欢哲学争辩的那一部分人对此有许多争论（直觉主义学派等等），但是让我们忽略掉它们，先看看在今天数学家是怎么使用这个词的吧。</p>
<p>首先，无穷大不是一个实数，在实数集中不存在任何数比其他所有数更大，这是确定无疑的事情。</p>
<p>其次，在许多场合下，我们确实可以把无穷大当作一个名词来使用，既方便又不造成困扰。例如前面提及的在测度论里我们说一个可测集的测度是一个“数”，这里的“数”既包括非负实数也包括无穷大。事实上，在有些数学书里索性把实数加上无穷大这样一个集合称为“增广实数集”。我们甚至可以对无穷大定义运算（在事先做好严格约定的前提下），这对于很多理论的叙述带来了极大的方便。如果说得更技术化一点，在很多数学分支（例如仿射几何）里我们还能像让每个实数对应于直线上的一个点这样一个几何对象一样，让无穷大这样一个特殊的对象也对应于一个特殊的几何对象（所谓的“无穷远点”），并且让所有这些几何对象平等地参与到几何学中来。只要仔细做好事先的公理准备，这样子做并不会引起任何逻辑问题。</p>
<p>——也许有人会觉得奇怪，怎么数学家可以如此随便，想给实数集添上什么就添上什么？事实上，数学家就是有这样的权利，因为说到底，数学不是研究真实自然界的学问，而只是研究人造概念的学问。任何人造概念，只要在逻辑上被严格的描述出来又不造成内在的逻辑不自洽，都可以被认为是“存在”的。复数的引进就是一个很好的例子。</p>
<p>——那前面怎么又说“无穷小不存在”？就算无穷小本身不能是一个实数，为什么不能把它添在实数集之外也弄一个“增广实数集”出来研究？</p>
<p>事实上，这样做是可以的，而且事实上也确实有好事者这样做过。问题在于它毫无意义。前面说了，任何人都有权利自己定义出一些什么东西来作为数学对象来研究，这是对的，只要他在逻辑上足够细心就行。可是这句话还有一个常常被人忽视的反面：数学尽管不是直接研究自然界的学问，可是它毕竟是在人们研究自然界的过程中形成而又有助于人们对自然界的理解的。如果一个数学概念纯粹只是自说自话的产物，那无论它多么自洽，也没有人会去关心它。复数这一人为的构造之所以被所有人承认是因为它巨大的威力。而无穷小——正如前面所指出的——是一个毫无必要引入的概念，添上它只会自找麻烦。无穷小和无穷大的命运之所以不同，关键正在于此。</p>
<p>回到无穷大这个词上来。这一系列文章的一开头还说过无穷大可以分成“可数”和“不可数”的无穷大，那又是怎么回事？</p>
<p>这是一个更常见的误解，这其实是两个不同的词：作为一个极限的（潜）无穷和由此引申而来的作为一个数学对象的（实）无穷是一码事，作为一个集合的势的可数无穷或者不可数无穷是另一码事，不同于前者的“无穷大”，后者其实应该被称为“无穷多”才对，只是人们通常混为一谈。事实上，当我们说“一个集合有无穷多个元素”的时候，我们有必要指出这个集合是不是可数，而当我们说“一条直线的测度是无穷大”的时候，却完全谈不上什么可数不可数。——在数学书中通过观察上下文，分辨这两者并不是很难的事情，可是如果把“无穷”作为一个哲学命题来研究的时候，这种区分却是必须的。——不幸的是，就我阅读所及，很多时候人们都没做到这一点。</p>
<ol start="3">
<li>不可测集与选择公理、数学的严密性</li>
</ol>
<p>回顾一下“不可测集”这个词的意思：在勒贝格测度的意义下，总有一些集合是没办法定义测度的，这样的集合称为不可测集。同时已经被我们反复指出过的一点是：一个没受过专门数学训练的人所能想象到的任何古怪集合其实都是可测的，不可测集非常罕见。</p>
<p>不可测集的存在是数学中中一件令人遗憾的事实，要是能给直线的任何一个子集定义长度，这样的理论该有多么漂亮啊……数学中常常有这样的情形，一个人们通过直觉认定的美妙设想，偏偏被一两个好事者精心构造出的反例破坏了，但是数学毕竟受制于逻辑，不管一个反例多么煞风景，只要它确实成立，数学家也只好接受它。</p>
<p>可是不可测集这个例子有点不同：构造不可测集，用到了选择公理。</p>
<p>这件事情说来话长，简单的说，我们都知道整个数学是建立在一些很显然也很直观的公理之上的，这些公理大多数都是诸如等量之和为等量之类的废话，可是选择公理稍微复杂一点，它是说：</p>
<p>任何给定一组非空集合，我们总能从其中的每一个集合里取出一个元素组成一个集合。</p>
<p>也像废话一样，是吧，可是这句话多少有点罗嗦，不像等量之和为等量一样简单明了。于是人们对它多少有所争议，有人认为它不应当排在基本公理之内。可是毕竟这句话也挑不出什么错，而且人们很快发现，很多很有用的数学结果离开选择公理就变得很难证明或者根本不可能证明，于是将就着也就承认它了。</p>
<p>可是不可测集的存在却又掀起了人们的疑虑，反对选择公理的人说，看看吧，要是没有选择公理，也就没有不可测集了。</p>
<p>赞成的人反驳说，不可测就不可测呗，有什么大不了的……虽然整个理论确实变得不那么完美了。——他们不知道更大的问题还在后面。1924年，波兰数学家巴拿赫（Banach）在选择公理和不可测集构造法的基础上，证明了石破天惊的“分球定理”：一个半径为1的实心球，可以剖分成有限的若干块，用这些块可以完整地重新拼出两个半径为1的实心球体！</p>
<p>这一下引起轩然大波，反对选择公理的数学家们声势大振，认为选择公理完全是trouble maker，必欲除之而后快。赞成选择公理的数学家们则指出选择公理“功大于过”，毕竟有很多有价值的数学成果出自选择公理的基础。双方僵持的结果是大家各行其是，大多数数学家承认选择公理，同时忍受巴拿赫分球定理所带来的不适感，少数数学家坚持不要选择公理，为此失去很多别的很有用的定理也在所不惜。</p>
<p>这一僵持局面维持了很多年，直到二十世纪的中叶才被戏剧性地解决。人们在不承认选择公理的假设下构造出了一大堆比巴拿赫的球体更严重的反例（例如一个空间同时有两个维数）。这些反例不只像巴拿赫的例子一样违反直觉，而且还严重的破坏了大多数已有的数学结果。于是人们发现，承认选择公理也许是必须的，而像巴拿赫的反例那样的反直觉的结果，也只能被迫承担下来了。</p>
<p>所以到今天几乎所有的数学研究都是在承认选择公理的基础上进行的。虽然作为一种后遗症，人们总是会时不时地谨慎的在使用选择公理的时候加上一句声明：“本文依赖选择公理。”——这也许是这条公理的一个特殊待遇了。</p>
<p>以上便是这段公案的来龙去脉。很多人可能在读完这段故事之后疑虑重重。什么啊？数学家们难道是这么随便的确定公理体系的么？如此的实用主义，似乎全然置真理的地位于不顾的样子。很多人可能还会想起欧几里德第五公设的故事，觉得数学家们原来如此不负责任，带给人们的不是一套严整规范的理论体系，而是一个支离破碎的混乱图景。连公理的问题都搞不定，整个数学岂不是空中楼阁？</p>
<p>限于篇幅，这篇文章不可能对这个问题予以展开论述，可是至少我们可以澄清一个常见的似是而非的误解：数学是严密性的科学，数学的发展也只有在严密的公理化基础上才能得以实现。</p>
<p>这句话——至少在字面上——是对的。不可测集的例子本身就说明，为了严密性，数学家们甚至不惜放弃直观，——像巴拿赫球那样的例子尽管如此怪诞，可是它是严密逻辑的产物，数学家也只好承认它的存在。</p>
<p>可是在更宏观的层面上，这句话却是错的。前面提到的分析学就是很好的例子：微积分的思想的提出是在十七世纪，在随后的十八世纪里取得了丰硕的成果，可是它的严密化却直到十九世纪下半叶才真正得以实现。测度论是另一个例子：“测度”是人们对于长度这个词的直观理解的严密化，可是这并不是说，在测度论被提出之前的漫长岁月里人们对于长度都一无所知，恰恰相反，人们已经知道了相当多的事情，只是等待测度论的语言让一切都变得精确和完整而已。</p>
<p>所以数学的发展实质上是一个拖泥带水的过程，一代又一代崭新、充满活力却又粗糙的思想被提出来，人们意识到它的重要性，予以发扬光大，产生一系列重要的成果同时又带来困惑，直到崭新的数学语言诞生，清理战场，让一切显得井井有条，像教科书上的文字一样道貌岸然，而同时却又有新的粗糙的思想诞生了……在这个过程里，严密性始终只是一个背景，尽管无处不在，可是并不占据舞台的统治地位。数学家们在意严密性，追逐严密性，甚至不惜为了严密性而牺牲看似有价值的学术成果，可是严密性并不是数学发展的引领旗帜，从来都不是。</p>
<p>这就是为什么同很多人的误解相反，大多数数学家其实并不关心那些关于数学基础的哲学性的争论，这也就是为什么我把眼前这些讨论放进附记的原因——一件事情是不是关系到数学的逻辑基础和这件事情在数学上是不是重要一点关系都没有。所有这些故事：可数与不可数、可测与不可测、选择公理等等，都是和二十世纪初所谓“第三次数学危机”的大背景联系在一起的，那段时间里数学家之间产生了无数纷争，可是今天的数学学生们在严肃认真地学习集合论和测度论的同时，却只对那些八卦付之一笑，作为茶余饭后的谈资。——事实上，即使在二十世纪初，也有大量的数学家根本不关注这件事情或者压根就采取了日后看来是错误的立场（反对康托，反对不可数集的概念，等等）却同时又在自己的领域里作出了重要的甚至是历史性的贡献。</p>
<p>关于那个所谓的“第三次数学危机”，有一本著名的科普著作《数学：确定性的丧失》专门讨论了它。这本书内容相当详尽，不幸的是它所引起的误解和它阐明的事情一样多。关于这次“危机”的描述主要集中在第十二章，那一章的结尾倒是相当深刻，值得特别引用在此：</p>
<blockquote>
<p>“一个寓言恰如其分地概括了本世纪有关数学基础的进展状况。在莱茵河畔，一座美丽的城堡已经矗立了许多个世纪。在城堡的地下室中生活着一群蜘蛛，突然一阵大风吹散了它们辛辛苦苦编织的一张繁复的蛛网，于是它们慌乱地加以修补，因为它们认为，正是蛛网支撑着整个城堡。”</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Brian Cai</p>
              <p class="site-description motion-element" itemprop="description">Brian的个人站，专注数学、编程以及新的技术</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Brian Cai</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v6.7.0</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  

  

  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  

  





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
